{% extends 'modmaster.html' %}
{% block title %}Forum panel{% endblock title %}
{% block content %}
<script>
  function banUser(userId) {
    // Send an AJAX POST request to remove the user from the group
    fetch('/banuser/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-CSRFToken': '{{ csrf_token }}'
      },
      body: JSON.stringify({ userId: userId })
    }).then(function(response) {
      // If the request succeeded, remove the table row
      if (response.ok) {
        var row = document.getElementById('row-' + userId);
        if (row) {
          row.parentNode.removeChild(row);
        }
      }
    }).catch(function(error) {
      console.error('Failed to remove user:', error);
    });
  }
</script>
<div class="container">
  <div class="row">
    <div class="col">
      <h3>Manage users</h3>
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Username</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for member in members %}
          <tr id="row-{{ member.id }}">
            <td>{{ member }}</td>
            <td><button class="btn btn-danger" onclick="removeUser({{ member.id }})">Ban</button></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="col">
      <h3>Reports</h3>
    </div>
  </div>
</div>
{% endblock content %}