# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

tasks:
  - name: Prepare dependencies and DB
    init: |
      cd backend && pip install -r requirements.txt
      cd ../frontend && npm install
      docker pull mysql:8.1.0
  - name: DB Server
    command: bash ./scripts/start-mysql.sh
  - name: API Server
    init: |
      sleep 8
      python3 backend/manage.py makemigrations
      python3 backend/manage.py migrate
    command: python3 backend/manage.py runserver
  - name: Frontend
    command: cd frontend; npm start
      

vscode:
    extensions:
    - ms-azuretools.vscode-docker
    - esbenp.prettier-vscode
    - mtxr.sqltools
    - mtxr.sqltools-driver-mysql
    - ms-python.python
    - mads-hartmann.bash-ide-vscode